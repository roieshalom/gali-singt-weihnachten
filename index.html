<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PW67SBVK');
  </script>
  <!-- End Google Tag Manager -->

  <!-- Existing favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <!-- iOS home screen icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <!-- Android / general large icon -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-chrome.png">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-51CRT4MWMT"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Henny+Penny&display=swap" rel="stylesheet">

  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-51CRT4MWMT');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gali singt Weihnachten</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PW67SBVK"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="container">
    <header>
      <h1>üéÑ Gali singt Weihnachten üéµ</h1>
      <p class="subtitle">S√º√üe Melodien f√ºr die Weihnachtszeit</p>
    </header>

    <main class="songs-list">
      <div class="song-item">
        <h2>Nikolaus, Nikolaus</h2>
        <audio controls controlsList="nodownload">
          <source src="audio/nikolausnikolaus.m4a" type="audio/mp4">
        </audio>
      </div>
      <div class="song-item">
        <h2>What shall we do?</h2>
        <audio controls controlsList="nodownload">
          <source src="audio/what shall we do.m4a" type="audio/mp4">
        </audio>
      </div>
      <div class="song-item">
        <h2>E. R. Kalter</h2>
        <audio controls controlsList="nodownload">
          <source src="audio/e.r.kalter.m4a" type="audio/mp4">
        </audio>
      </div>
      <div class="song-item">
        <h2>Der Willi Wumm</h2>
        <audio controls controlsList="nodownload">
          <source src="audio/derwilliwumm.m4a" type="audio/mp4">
        </audio>
      </div>
      <div class="song-item">
        <h2>Ich schenk' dir einen Regenbogen</h2>
        <audio controls controlsList="nodownload">
          <source src="audio/ichschenkdir.m4a" type="audio/mp4">
        </audio>
      </div>
      <div class="song-item">
        <h2>Un poquito cantas</h2>
        <audio controls controlsList="nodownload">
          <source src="audio/poquito.m4a" type="audio/mp4">
        </audio>
      </div>
      <div class="song-item">
        <h2>Weihnachtslied aus Ghana</h2>
        <audio controls controlsList="nodownload">
          <source src="audio/ausghana.m4a" type="audio/mp4">
        </audio>
      </div>
    </main>

    <footer>
      <p>¬©2025 Made by Papa ‚ù§Ô∏è</p>
    </footer>
  </div>

  <!-- One‚Äëat‚Äëa‚Äëtime audio behaviour -->
  <script>
    let currentAudio = null;
    const audioElements = document.querySelectorAll('audio');

    audioElements.forEach(audio => {
      audio.addEventListener('play', () => {
        if (currentAudio && currentAudio !== audio) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
        }
        currentAudio = audio;
      });

      audio.addEventListener('ended', () => {
        if (currentAudio === audio) {
          currentAudio = null;
        }
      });
    });
  </script>

  <!-- Track song plays in GA4 -->
  <script>
  window.addEventListener('DOMContentLoaded', function () {
    // Track song plays in GA4
    document.querySelectorAll('audio').forEach((audio) => {
      audio.addEventListener('play', () => {
        const container = audio.closest('.song-item') || audio.closest('div, section');
        const heading = container ? container.querySelector('h2, h3, h4') : null;
        const songTitle = heading ? heading.textContent.trim() : 'Unknown track';

        if (typeof gtag !== 'undefined') {
          gtag('event', 'song_play', {
            song_title: songTitle,
            debug_mode: true
          });
        }
      });
    });
  });
</script>

</body>
</html>
