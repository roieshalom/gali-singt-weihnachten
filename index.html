<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Gali singt Weihnachten - S√º√üe Melodien f√ºr die Weihnachtszeit. Eine Sammlung wundersch√∂ner Weihnachtslieder gesungen von Gali.">
  <meta name="keywords" content="Weihnachten, Weihnachtslieder, Gali, Musik, Lieder">
  
  <!-- Existing favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <!-- iOS home screen icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <!-- Android / general large icon -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-chrome.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Henny+Penny&display=swap" rel="stylesheet">

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-51CRT4MWMT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-51CRT4MWMT');
</script>

  <title>Gali singt Weihnachten</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <div class="container">
    <header>
      <h1>üéÑ Gali singt Weihnachten üéµ</h1>
      <p class="subtitle">S√º√üe Melodien f√ºr die Weihnachtszeit</p>
    </header>

    <main class="songs-list">
      <div class="song-item" data-song-id="nikolaus-nikolaus">
        <div class="song-header">
          <h2>Nikolaus, Nikolaus</h2>
          <button class="like-button" aria-label="Gef√§llt mir" title="Gef√§llt mir">
            <span class="heart">‚ô°</span>
            <span class="like-count">0</span>
          </button>
        </div>
        <audio controls controlsList="nodownload" preload="metadata" aria-label="Nikolaus, Nikolaus">
          <source src="audio/nikolausnikolaus.m4a" type="audio/mp4">
          <source src="audio/1nikolausnikolaus.mp3" type="audio/mpeg">
          Ihr Browser unterst√ºtzt das Audio-Element nicht.
        </audio>
      </div>
      <div class="song-item" data-song-id="what-shall-we-do">
        <div class="song-header">
          <h2>What shall we do?</h2>
          <button class="like-button" aria-label="Gef√§llt mir" title="Gef√§llt mir">
            <span class="heart">‚ô°</span>
            <span class="like-count">0</span>
          </button>
        </div>
        <audio controls controlsList="nodownload" preload="metadata" aria-label="What shall we do?">
          <source src="audio/what shall we do.m4a" type="audio/mp4">
          Ihr Browser unterst√ºtzt das Audio-Element nicht.
        </audio>
      </div>
      <div class="song-item" data-song-id="e-r-kalter">
        <div class="song-header">
          <h2>E. R. Kalter</h2>
          <button class="like-button" aria-label="Gef√§llt mir" title="Gef√§llt mir">
            <span class="heart">‚ô°</span>
            <span class="like-count">0</span>
          </button>
        </div>
        <audio controls controlsList="nodownload" preload="metadata" aria-label="E. R. Kalter">
          <source src="audio/e.r.kalter.m4a" type="audio/mp4">
          Ihr Browser unterst√ºtzt das Audio-Element nicht.
        </audio>
      </div>
      <div class="song-item" data-song-id="der-willi-wumm">
        <div class="song-header">
          <h2>Der Willi Wumm</h2>
          <button class="like-button" aria-label="Gef√§llt mir" title="Gef√§llt mir">
            <span class="heart">‚ô°</span>
            <span class="like-count">0</span>
          </button>
        </div>
        <audio controls controlsList="nodownload" preload="metadata" aria-label="Der Willi Wumm">
          <source src="audio/derwilliwumm.m4a" type="audio/mp4">
          Ihr Browser unterst√ºtzt das Audio-Element nicht.
        </audio>
      </div>
      <div class="song-item" data-song-id="ich-schenk-dir-einen-regenbogen">
        <div class="song-header">
          <h2>Ich schenk' dir einen Regenbogen</h2>
          <button class="like-button" aria-label="Gef√§llt mir" title="Gef√§llt mir">
            <span class="heart">‚ô°</span>
            <span class="like-count">0</span>
          </button>
        </div>
        <audio controls controlsList="nodownload" preload="metadata" aria-label="Ich schenk' dir einen Regenbogen">
          <source src="audio/ichschenkdir.m4a" type="audio/mp4">
          Ihr Browser unterst√ºtzt das Audio-Element nicht.
        </audio>
      </div>
      <div class="song-item" data-song-id="un-poquito-cantas">
        <div class="song-header">
          <h2>Un poquito cantas</h2>
          <button class="like-button" aria-label="Gef√§llt mir" title="Gef√§llt mir">
            <span class="heart">‚ô°</span>
            <span class="like-count">0</span>
          </button>
        </div>
        <audio controls controlsList="nodownload" preload="metadata" aria-label="Un poquito cantas">
          <source src="audio/poquito.m4a" type="audio/mp4">
          Ihr Browser unterst√ºtzt das Audio-Element nicht.
        </audio>
      </div>
      <div class="song-item" data-song-id="weihnachtslied-aus-ghana">
        <div class="song-header">
          <h2>Weihnachtslied aus Ghana</h2>
          <button class="like-button" aria-label="Gef√§llt mir" title="Gef√§llt mir">
            <span class="heart">‚ô°</span>
            <span class="like-count">0</span>
          </button>
        </div>
        <audio controls controlsList="nodownload" preload="metadata" aria-label="Weihnachtslied aus Ghana">
          <source src="audio/ausghana.m4a" type="audio/mp4">
          Ihr Browser unterst√ºtzt das Audio-Element nicht.
        </audio>
      </div>
      <div class="song-item" data-song-id="froh-weihnachten">
        <div class="song-header">
          <h2>Froh Weihnachten</h2>
          <button class="like-button" aria-label="Gef√§llt mir" title="Gef√§llt mir">
            <span class="heart">‚ô°</span>
            <span class="like-count">0</span>
          </button>
        </div>
        <audio controls controlsList="nodownload" preload="metadata" aria-label="Froh Weihnachten">
          <source src="audio/frohweihnachten.m4a" type="audio/mp4">
        </audio>
      </div>
    </main>

    <footer>
      <p>¬©2025 Made by Papa ‚ù§Ô∏è</p>
    </footer>
  </div>

  <!-- One‚Äëat‚Äëa‚Äëtime audio behaviour -->
  <script>
    let currentAudio = null;
    const audioElements = document.querySelectorAll('audio');

    audioElements.forEach(audio => {
      audio.addEventListener('play', () => {
        if (currentAudio && currentAudio !== audio) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
        }
        currentAudio = audio;
      });

      audio.addEventListener('ended', () => {
        if (currentAudio === audio) {
          currentAudio = null;
        }
      });
    });
  </script>

  <!-- Like functionality -->
  <script>
    // Initialize likes from localStorage or create empty object
    function getLikes() {
      const stored = localStorage.getItem('songLikes');
      return stored ? JSON.parse(stored) : {};
    }

    // Save likes to localStorage
    function saveLikes(likes) {
      localStorage.setItem('songLikes', JSON.stringify(likes));
    }

    // Get user's liked songs
    function getUserLikes() {
      const stored = localStorage.getItem('userLikedSongs');
      return stored ? JSON.parse(stored) : [];
    }

    // Save user's liked songs
    function saveUserLikes(likedSongs) {
      localStorage.setItem('userLikedSongs', JSON.stringify(likedSongs));
    }

    // Initialize likes on page load
    function initializeLikes() {
      const likes = getLikes();
      const userLikedSongs = getUserLikes();
      const songItems = document.querySelectorAll('.song-item');

      songItems.forEach(item => {
        const songId = item.getAttribute('data-song-id');
        const likeButton = item.querySelector('.like-button');
        const likeCount = item.querySelector('.like-count');
        const heart = item.querySelector('.heart');

        // Set initial count
        const count = likes[songId] || 0;
        likeCount.textContent = count;

        // Check if user already liked this song
        const isLiked = userLikedSongs.includes(songId);
        if (isLiked) {
          likeButton.classList.add('liked');
          heart.textContent = '‚ô•';
        } else {
          heart.textContent = '‚ô°';
        }

        // Add click handler
        likeButton.addEventListener('click', () => {
          const currentLikes = getLikes();
          const userLikes = getUserLikes();
          const isCurrentlyLiked = userLikes.includes(songId);

          if (isCurrentlyLiked) {
            // Unlike: remove like
            currentLikes[songId] = Math.max(0, (currentLikes[songId] || 0) - 1);
            const index = userLikes.indexOf(songId);
            if (index > -1) {
              userLikes.splice(index, 1);
            }
            likeButton.classList.remove('liked');
            heart.textContent = '‚ô°';
          } else {
            // Like: add like
            currentLikes[songId] = (currentLikes[songId] || 0) + 1;
            userLikes.push(songId);
            likeButton.classList.add('liked');
            heart.textContent = '‚ô•';
          }

          // Save and update UI
          saveLikes(currentLikes);
          saveUserLikes(userLikes);
          likeCount.textContent = currentLikes[songId] || 0;

          // Add animation
          heart.style.transform = 'scale(1.3)';
          setTimeout(() => {
            heart.style.transform = '';
          }, 200);
        });
      });
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeLikes);
    } else {
      initializeLikes();
    }
  </script>
</body>
</html>
